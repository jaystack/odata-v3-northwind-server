// JayData 1.5.5 RC
// Dual licensed under MIT and GPL v2
// Copyright JayStack Technologies (http://jaydata.org/licensing)
//
// JayData is a standards-based, cross-platform Javascript library and a set of
// practices to access and manipulate data from various online and offline sources.
//
// Credits:
//     Hajnalka Battancs, Dániel József, János Roden, László Horváth, Péter Nochta
//     Péter Zentai, Róbert Bónay, Szabolcs Czinege, Viktor Borza, Viktor Lázár,
//     Zoltán Gyebrovszki, Gábor Dolla
//
// More info: http://jaydata.org
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("jaydata/modules/angular",["jaydata/core"],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.$data=e()}}(function(){return function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var f="function"==typeof require&&require;if(!u&&f)return f(i,!0);if(a)return a(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(e){var n=t[i][1][e];return o(n?n:e)},c,c.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){(function(r){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var a=e("jaydata/core"),i=o(a),u="undefined"!=typeof window?window.jQuery:"undefined"!=typeof r?r.jQuery:null,f=o(u),s="undefined"!=typeof window?window.angular:"undefined"!=typeof r?r.angular:null,c=o(s);!function(){Object.defineProperty(i["default"].Entity.prototype,"_isNew",{get:function(){return!this.storeToken}}),Object.defineProperty(i["default"].Entity.prototype,"_isDirty",{get:function(){return!this._isNew&&this.changedProperties&&this.changedProperties.length>0}});var e=i["default"].Entity.prototype.save,t=i["default"].Entity.prototype.remove,n=i["default"].EntityContext.prototype.saveChanges,r=function(e){var t,n,r=e.expression.getJSON(),o=0;if(0==r.length)return o;for(t=0;t<r.length;t++)n=r.charCodeAt(t),o=(o<<5)-o+n,o&=o;return o};c["default"].module("jaydata",["ng",["$provide",function(o){o.factory("$data",["$rootScope","$q",function(o,a){var u={};return i["default"].Entity.prototype.hasOwnProperty=function(e){var t;return this.getType&&this.getType().memberDefinitions?(t=this.getType().memberDefinitions["$"+e])?"property"===t.kind&&t.enumerable:!1:Object.prototype.hasOwnProperty.apply(this,arguments)},i["default"].Queryable.prototype.toLiveArrayEx=function(e,t){function n(e){a.toArray().then(function(n){t.length=0,n.forEach(function(e){t.push(e)}),e.resolve(t)}).fail(e.reject).then(function(){i.$apply()})}function r(){var e=f["default"].Deferred(n);return e.promise(t),t}Array.isArray(e)&&(t=e,e=void 0),t=t||[],e=e||{};var a=this,i=e.scope||o;return t.refresh=r,r()},i["default"].Queryable.prototype.toLiveArray=function(e){function t(e,t){if(e){var n="success"===t?i.successHandlers:i.errorHandlers;return"completed"===i.state?e(i):n.push(e),i}}var n=this,a=(this.toTraceString(),r(this));if(u[a])return u[a];var i=[];return u[a]=i,i.state="inprogress",i.successHandlers=[],i.errorHandlers=[],e&&"function"==typeof e&&t(e,"success"),i.then=i.success=function(e){return t(e,"success")},i.error=function(e){return i},i.refresh=function(e){return i.length=0,i.state="inprogress",t(e,"success"),n.toArray({success:i.resolve,error:i.reject}),i},i.resolve=function(e){i.state="completed",e.forEach(function(e){i.push(e)}),i.successHandlers.forEach(function(e){e(i)}),o.$$phase||o.$apply()},i.reject=function(e){i.state="failed",i.errorHandlers.forEach(function(t){t(e)}),o.$$phase||o.$apply()},this.toArray({success:i.resolve,error:i.reject}),i},i["default"].Entity.prototype.save=function(){var t=this,n=a.defer();return e.call(t).then(function(){u={},n.resolve(t),o.$$phase||o.$apply()}).fail(function(e){n.reject(e),o.$$phase||o.$apply()}),n.promise},i["default"].ItemStoreClass.prototype.EntityInstanceSave=function(e,t){var r=i["default"].ItemStore,o=this;return r._getStoreEntitySet(e,o).then(function(a){return r._getSaveMode(o,a,t,e).then(function(e){switch(e=e||"add"){case"add":a.add(o);break;case"attach":a.attach(o,!0),o.entityState=i["default"].EntityState.Modified;break;default:var t=new i["default"].PromiseHandler,u=t.createCallback();return u.error("save mode not supported: "+e),t.getPromise()}return n.call(a.entityContext).then(function(){return r._setStoreAlias(o,a.entityContext.storeToken),o})})})},i["default"].ItemStoreClass.prototype.EntityInstanceRemove=function(e){var t=i["default"].ItemStore,r=this;return t._getStoreEntitySet(e,r).then(function(e){return e.remove(r),n.call(e.entityContext).then(function(){return r})})},i["default"].ItemStoreClass.prototype.EntityTypeRemoveAll=function(e){return function(t){var r=i["default"].ItemStore;return r._getStoreEntitySet(t,e).then(function(e){return e.toArray().then(function(t){return t.forEach(function(t){e.remove(t)}),n.call(e.entityContext).then(function(){return t})})})}},i["default"].ItemStoreClass.prototype.EntityTypeAddMany=function(e){return function(t,r){var o=i["default"].ItemStore;return o._getStoreEntitySet(r,e).then(function(e){var r=e.addMany(t);return n.call(e.entityContext).then(function(){return r})})}},i["default"].Entity.prototype.remove=function(){var e=a.defer(),n=this;return t.call(n).then(function(){u={},e.resolve(n),o.$$phase||o.$apply()}).fail(function(t){e.reject(t),o.$$phase||o.$apply()}),e.promise},i["default"].EntityContext.prototype.saveChanges=function(){var e=this,t=a.defer();return n.call(e).then(function(e){u={},t.resolve(e),o.$$phase||o.$apply()}).fail(function(e){t.reject(e),o.$$phase||o.$apply()}),t.promise},i["default"]}])}]])}(),n["default"]=i["default"],t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"jaydata/core":"jaydata/core"}]},{},[1])(1)});
//# sourceMappingURL=angular.min.js.map
